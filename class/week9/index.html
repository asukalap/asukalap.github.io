<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.2/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style media="screen">
    .myHtml{
      display: flex;
      justify-content: space-around;
      align-items: center;
    }
    .font20{
      font-size: 20px;
    }
    .boldText{
      font-weight: bold;
    }
    .greyBackground{
      background-color: #efefef;
    }
    </style>
</head>

<body>
  <div class="container">
    <div class="row">
      <div class="col-md-12 myHtml">

      </div>
    </div>
  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <script>
    var url = "https://meganstodd.github.io/class/week8/assets/myJSON.json";

    //    {
    //   "size":"Concert",
    //   "brand":"Cordoba",
    //   "price":75.00,
    //   "rating":9,
    //   "isStock":true,
    //   "colour":"Light Brown"
    // },

    function processData(d){
      console.dir(d);
      var html = ""; //make a variable to hold the html

      //for Loop
      for (var i=0;i<d.length;i++){
        html+="<div class='myItem'>"; //container for this item
        html += "<div class='font20 boldText'>" + d[i].size + "</div>";
        html += "<div>" + d[i].brand + "</div>";
        html += "<div>" + d[i].price + "</div>";
        html += "<div>" + d[i].rating + "</div>";
        html += "<div>" + d[i].colour + "</div>";
        html+="<button type='button' class='itemButton btn btn-default'>Click</button>"
        html+="</div>";
      }

      //write html to the page
      $(document).ready(function(){
        $(".myHtml").html(html);

        //write an event to handle a click (event-handler functions)
        //event for all buttons; turn on click, execute function
        $(".itemButton").on("click", function(){
          console.log("click");
          //knows that I'm looking at the button that I clicked
          //tell it to go to the item container and change background
          //go up the tree to the closest myItem and toggle the css class (turn on and off)
          $(this).closest(".myItem").toggleClass("greyBackground");
        });

      })

    }
    //$.getJSON means it will make sure the file is a JSON file
    $.get(url)
      .done(function(data) { //what comes back is put into "data"
        console.log("success!! ");
        //do something with the octicon-database
        processData(data)
      })
      .fail(function(data) {
        console.log("failed " + JSON.stringify(data));
      })
  </script>
</body>

</html>
